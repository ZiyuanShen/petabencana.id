<template>
  <require from="leaflet/leaflet.css"></require>
  <require from="./map.css"></require>
  <require from="../../components/report-info/report-info"></require>
  <require from="../../components/side-pane/side-pane"></require>

  <div id="pageWrapper">
    <div id="cityPopup" if.bind="show_city_select_popup">
      <p>Select city :</p>
      <label repeat.for="city_region of city_regions">
        <input type="radio" model.bind="city_region" checked.bind="city_name" change.delegate="selectCity(city_region)">
        ${city_region}
        <br>
      </label>
    </div>

    <div id="mapContainer">
    </div>

    <div id="topBar">
      <div id="logo_top">
        <a href="https://dev.petabencana.id">
          <img id="pbLogo" src="assets/graphics/Peta_logo.svg" width="100">
        </a>
      </div>
      <div id="optionsBtn" if.bind="!sidePaneOpen" click.delegate="showPane('#sidePane')">
        <i class="icon-menu"></i>
      </div>
      <div id="optionsBtn" if.bind="sidePaneOpen" click.delegate="hidePane('#sidePane')">
        <i class="icon-cancel-2"></i>
      </div>
    </div>

    <div id="logo_bottom">
      <a href="http://urbanrisklab.org">
        <img id="mitLogo" src="assets/graphics/URL_logo.svg" width="180">
      </a>
    </div>

    <div id="reportPane">
      <div class="closeBtn" click.delegate="hidePane('#reportPane')">
        <i class="icon-cancel-2" aria-hidden="true"></i>
      </div>
      <report-info id="preview" if.bind="layers.popupContent.pkey" pkey.bind="layers.popupContent.pkey" city.bind="city_name" imageurl.bind="layers.popupContent.image_url" height.bind="layers.popupContent.report_data.flood_depth" title.bind="layers.popupContent.title" text.bind="layers.popupContent.text">
      </report-info>
    </div>

    <div id="sidePane" ref="sidePane">
      <side-pane cities.bind="city_regions" selected.bind="city_name" change-city.call="viewReport($event, $event)" close-pane.call="hidePane('#sidePane')">
      </side-pane>
    </div>
  </div>
</template>
